tibble(
No = 1:7,
gender =
c("M","F","F","M","F","M","M"),
height =
c(165,150,170,165,195,180)
)
# 「packages」フォルダ内のパッケージを使用するよう設定
.libPaths("packages")
# パッケージ読み込み
library(lightgbm) # lightgbmを一番先に読み込まないと使用する際にエラーが発生．．．
library(stats)
library(MASS)
library(tidyverse)
library(tidymodels)
library(treesnip)
library(plotly)
library(skimr)
library(GGally)
library(withr)
library(tabnet)
library(modeldata)
# データ定義：クレジットデータ
data("credit_data")
credit_data = tibble(credit_data)
# 既知データ
known =
credit_data %>%
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .) %>%
training()
# 未知データ
unknown =
credit_data %>%
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .) %>%
testing()
# 初期分割データ
initial_split =
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .)
# 学習データ
train = training(initial_split)
# 評価データ
test = testing(initial_split)
# 分割データ
stratified_splits =
vfold_cv(train, v = 4, strata = "Status") %>%
with_seed(1234, .)
# 図の書式
theme_set(theme_linedraw(base_size = 25, base_family = "Helvetica"))
df =
tibble(
No = 1:7,
gender =
c("M","F","F","M","F","M","M"),
height =
c(165,150,170,165,195,180)
)
diamonds %>%
filter(
carat <= 0.25
)
df =
tibble(
No = 1:7,
gender =
c("M","F","F","M","F","M","M"),
height =
c(165,150,170,165,195,180)
)
df =
tibble(
No = 1:7,
gender =
c("M", "F", "F", "M", "F", "M", "M"),
height =
c(165, 150, 170, 165, 195, 180)
)
df =
tibble(
No = 1:7,
gender =
c("M", "F", "F", "M", "F", "M", "M"),
height =
c(165, 150, 170, 175, 165, 195, 180)
)
df =
tibble(
No = 1:7,
gender =
c("M", "F", "F", "M", "F", "M", "M"),
height =
c(165, 150, 170, 175, 165, 195, 180)
)
df
df %>%
filter(
gender == "F"
)
df %>%
filter(
c(FALSE, TRUE,FALSE,TRUE,FALSE,FALSE)
)
df %>%
filter(
c(FALSE, TRUE,TRUE,FALSE,TRUE,FALSE,FALSE)
)
diamonds %>%
filter(
price == 337
)
diamonds %>%
filter(
depth >= 62
)
diamonds %>%
filter(
between(cartat,0.23,0.27)
)
library(plotly)
library(skimr)
library(GGally)
library(withr)
library(tabnet)
library(modeldata)
# なぜか.RprofileからDALEXtraを読み込もうとするとエラーが発生．．．
#library(DALEXtra)
# データ定義：クレジットデータ
data("credit_data")
credit_data = tibble(credit_data)
# 既知データ
known =
credit_data %>%
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .) %>%
training()
# 未知データ
unknown =
credit_data %>%
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .) %>%
testing()
# 初期分割データ
initial_split =
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .)
# 学習データ
train = training(initial_split)
# 評価データ
test = testing(initial_split)
# 分割データ
stratified_splits =
vfold_cv(train, v = 4, strata = "Status") %>%
with_seed(1234, .)
# 図の書式
theme_set(theme_linedraw(base_size = 25, base_family = "Helvetica"))
diamonds %>%
filter(
between(cartat,0.23,0.27)
)
diamonds %>%
filter(
depth >= 62
)
diamonds %>%
filter(
between(cartat,0.23,0.27)
)
diamonds %>%
filter(
between(carat,0.23,0.27)
)
diamonds$cut %>% levels()
diamonds %>%
filter(
between(carat,0.23,0.27)
)
diamonds %>%
filter(
carat >= 0.23, carat >= 0.27
)
diamonds %>%
filter(
carat >= 0.23, carat <= 0.27
)
diamonds %>%
filter(
cut >= "Good"
)
diamonds$cut %>% levels()
diamonds %>%
filer(
color != "E"
)
diamonds %>%
filter(
color != "E"
)
diamonds %>%
filter(
color != "E"
)
diamonds %>%
filter(
color %in% c("I","J")
)
diamonds %>%
filter(is.na(cut))
df =
tibble(
col =
c(1,3,NA,5,4,8,NA,9,NA)
)
df %>%
filter(is.na(col))
diamonds %>%
filter(
depth >= 62 & color == "H"
)
diamonds %>%
filter(
depth >= 62 , color == "H"
)
diamonds %>%
filter(
depth >= 62 | color == "H"
)
diamonds %>%
filter(
xor(depth >= 62 , color == "H")
)
diamonds %>%
filter(
d!(epth >= 62 , color == "H")
)
diamonds %>%
filter(
!(depth >= 62 , color == "H")
)
diamonds %>%
filter(
!(depth >= 62 , color == "H")
)
diamonds %>%
filter(
!(depth >= 62 , color == "H")
)
diamonds %>%
filter(
!(depth >= 62 & color == "H")
)
iris =
iris %>% as_tibble()
iris %>%
select(Sepal.Lenght, Species)
iris %>%
select(Sepal.Length, Species)
iris =
iris %>%
as_tibble()
iris %>%
select(
Sepal.Length, Species
)
iris %>%
select(
1,5
)
iris %>%
select(Sepal.Length:Petal.Width)
iris %>%
select(-Sepal.Length,-Petal.Width)
iris %>%
select(-Sepal.Length,-Petal.Width)
iris %>%
select(starts_with("Sepal"))
iris %>%
select(ends_with("Width"))
iris %>%
select(contains("1.L"))
iris %>%
select(matches("^Se.*en.*"))
iris %>%
select(Sepal.Length,Petal.Length)
var = c("Sepal.Length","Petal.Length")
iris %>%
select(Sepal.Length,Petal.Length)
iris %>%
select(all_of(var))
iris
iris %>%
select(everything())
iris %>%
select(Species, everything())
iris %>%
select(where(is.double))
diamonds
diamonds %>%
mutate(
new =
"test"
) %>%
select(new,everything())
diamonds %>%
mutate(
new =
2*depth+5*table
) %>%
select(new,everything())
diamonds %>%
distinct(color)
diamonds %>%
mutate(
new=
if_else(
color=="E",
"E",
"not E"
)
)
diamonds %>%
mutate(
new=
if_else(
color=="E",
"E",
"not E"
)
) %>%
select(new,everything())
diamonds %>%
mutate(
new=
case_when(
color=="E"~"E",
color=="I"~"I",
TRUE~"not_E_I"
)
)
diamonds %>%
mutate(
new=
case_when(
color=="E"~"E",
color=="I"~"I",
TRUE~"not_E_I"
)
) %>%
select(new,everything())
df_name=
tibble(
key=c(1,1,3,2,5),
name=c("asuka","yuuki","siho","rina","manaka")
)
library(plotly)
library(skimr)
library(GGally)
library(withr)
library(tabnet)
library(modeldata)
# なぜか.RprofileからDALEXtraを読み込もうとするとエラーが発生．．．
#library(DALEXtra)
# データ定義：クレジットデータ
data("credit_data")
credit_data = tibble(credit_data)
# 既知データ
known =
credit_data %>%
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .) %>%
training()
# 未知データ
unknown =
credit_data %>%
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .) %>%
testing()
# 初期分割データ
initial_split =
initial_split(known, prop = 0.8, strata = "Status") %>%
with_seed(1234, .)
# 学習データ
train = training(initial_split)
# 評価データ
test = testing(initial_split)
# 分割データ
stratified_splits =
vfold_cv(train, v = 4, strata = "Status") %>%
with_seed(1234, .)
# 図の書式
theme_set(theme_linedraw(base_size = 25, base_family = "Helvetica"))
df_name=
tibble(
key=c(1,1,3,2,5),
name=c("asuka","yuuki","siho","rina","manaka")
)
df_group=
tibble(
key=1,4,
group=c("nogi","sakura","hinata","yoshimoto")
)
inner_join(df_name, df_group)
inner_join(df_name, df_group)
df_name=
tibble(
key=c(1, 1, 3, 2, 5),
name=c("asuka","yuuki","siho","rina","manaka")
)
df_group=
tibble(
key=1,4,
group=c("nogi","sakura","hinata","yoshimoto")
)
inner_join(df_name, df_group)
df_group=
tibble(
key=1:4,
group=c("nogi", "sakura","hinata","yoshimoto")
)
inner_join(df_name, df_group)
left_join(df_name, df_group)
right_join(df_name, df_group)
full_join(df_name, df_group)
df_name %>%
left_join(df_group)
df_name_1=
tibble(
key=1:2,
name=c("asuka","rina")
)
df_name_1=
tibble(
key=1:2,
name=c("asuka","rina")
)
df_name_2=
tibble(
key=1:3,
name=c("hinako","yui","kyouko")
)
df_group=
tibble(
group=c("nogi","sakura","nogi","sakura","hinata")
)
bind_rows(df_name_1,df_name_2)
df_name=
bind_rows(df_name_1,df_name_2)
df_name=
bind_rows(df_name_1,df_name_2)
df_name_group=
bind_cols(df_name,df_group)
bind_rows(df_name_1,df_name_2,df_name_1)
bind_cols(df_name,df_group,df_name)
df =
tibble(
class=c("a","b","c","c","a","c","b","a","c","b","a"),
gender=c("M","F","F","M","F","M","M","F","M","M","F"),
height=c(162,150,168,173,162,198,182,154,175,160,172)
)
df
df %>%
group_by(class)
df %>%
group_by(class) %>%
summarise(
mean=
mean(height)
)
df %>%
group_by(class,gender)
df %>%
group_by(class,gender) %>%
summarise(
mean=
mean(height)
)
df %>%
group_by(class,gender) %>%
summarise(
mean=
mean(height)
) %>%
ungroup()
df %>%
group_by(class) %>%
summarise(
Max=max(height),
Q3=quantile(height,0.75),
Mean=mean(height),
Median=median(height),
Q1=quantile(height,0.25),
Min=min(height),
sd=sd(height),
n=n()
)
diamonds
diamonds %>%
rowwise()
diamonds %>%
rowwise() %>%
mutate(
Mean=
mean(c(x,y,z))
)
diamonds %>%
rowwise() %>%
mutate(
Mean=
mean(c(x,y,z))
) %>%
select(x,y,z,Mean)
